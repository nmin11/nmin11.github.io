<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Aws on ãƒ­ã‚³</title>
    <link>https://nmin11.github.io/jp/tags/aws/</link>
    <description>Recent content in Aws on ãƒ­ã‚³</description>
    <generator>Hugo</generator>
    <language>jp</language>
    <lastBuildDate>Thu, 04 Jan 2024 00:00:00 +0000</lastBuildDate>
    <atom:link href="https://nmin11.github.io/jp/tags/aws/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>AWS CDKã¯éŠ€ã®å¼¾ä¸¸ã§ã¯ãªã„</title>
      <link>https://nmin11.github.io/jp/blog/3-aws-cdk-is-not-a-silver-bullet/</link>
      <pubDate>Sat, 12 Aug 2023 00:00:00 +0000</pubDate>
      <guid>https://nmin11.github.io/jp/blog/3-aws-cdk-is-not-a-silver-bullet/</guid>
      <description>&lt;h2 id=&#34;tldrnotion-aiãŒæ›¸ã„ã¦ãã‚ŒãŸæ–‡ç« &#34;&gt;TL;DRï¼ˆNotion AIãŒæ›¸ã„ã¦ãã‚ŒãŸæ–‡ç« ï¼‰&lt;/h2&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;AWS CDKï¼ˆã‚¯ãƒ©ã‚¦ãƒ‰é–‹ç™ºã‚­ãƒƒãƒˆï¼‰ã¯ã‚³ãƒ¼ãƒ‰å‹ã‚¤ãƒ³ãƒ•ãƒ©ï¼ˆIaCï¼‰é–‹ç™ºã«åºƒãä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ãŒã€ã™ã¹ã¦ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«é©ã—ãŸã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ãªã„ã“ã¨ã«æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ã¾ãšã€å¤šãã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚’å¿…è¦ã¨ã—ãªã„å°è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚„ç°¡å˜ãªã‚¤ãƒ³ãƒ•ãƒ©è¨­å®šã«ã¯ã€AWS CDKãŒæœ€å–„ã®é¸æŠã§ã¯ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã“ã®ã‚ˆã†ãªå ´åˆã«ã¯ã€ã‚ˆã‚Šç°¡å˜ãªIaCãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹ã‹ã€AWSã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ç›´æ¥ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãæ–¹ãŒåŠ¹ç‡çš„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚&lt;/p&gt;&#xA;&lt;p&gt;æ¬¡ã«ã€AWS CDKã¯ã‚¤ãƒ³ãƒ•ãƒ©å®šç¾©ã®ãŸã‚ã®é«˜ãƒ¬ãƒ™ãƒ«ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘æŠ½è±¡åŒ–ã‚’æä¾›ã—ã¾ã™ãŒã€ç‰¹å®šã®çŠ¶æ³ã§ã¯è¤‡é›‘ã•ã‚’å¢—åŠ ã•ã›ã‚‹å¯èƒ½æ€§ã‚‚ã‚ã‚Šã¾ã™ã€‚é–‹ç™ºè€…ã¯AWS CDKãŒæä¾›ã™ã‚‹æŸ”è»Ÿæ€§ã¨ã€ãã‚Œã«ã‚ˆã£ã¦ç™ºç”Ÿã—ã†ã‚‹è¿½åŠ ã®è¤‡é›‘ã•ã®é–“ã®ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ã‚’æ…é‡ã«è€ƒæ…®ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;&#xA;&lt;p&gt;æœ€å¾Œã«ã€AWS CDKã¯ã¾ã æ¯”è¼ƒçš„æ–°ã—ã„ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚Šã€æ€¥é€Ÿã«ç™ºå±•ã—ã¦ã„ã¾ã™ã€‚å¤§ããæ´»ç™ºãªã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãŒã‚ã‚Šã¾ã™ãŒã€ã¾ã ä¸€éƒ¨ã®ç‰¹å®šã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«å¿…è¦ãªã™ã¹ã¦ã®æ©Ÿèƒ½ã‚„ã‚µãƒãƒ¼ãƒˆãŒæä¾›ã•ã‚Œã¦ã„ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;&#xA;&lt;p&gt;å…¨ä½“çš„ã«ã€AWS CDKã¯ã‚¤ãƒ³ãƒ•ãƒ©é–‹ç™ºã®ãŸã‚ã®å¼·åŠ›ãªãƒ„ãƒ¼ãƒ«ã§ã™ãŒã€ã™ã¹ã¦ã‚’æº€ãŸã™ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚é–‹ç™ºè€…ã¯ç‰¹å®šã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¦ä»¶ã‚’æ…é‡ã«è€ƒæ…®ã—ãŸå¾Œã€AWS CDKã¾ãŸã¯ä»–ã®IaCãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹ã‹ã©ã†ã‹æ±ºå®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;&lt;/blockquote&gt;&#xA;&lt;h2 id=&#34;ãªãœç„¡é–¢ä¿‚ãªcdkã«å«Œæ°—ãŒã•ã—ãŸã®ã‹&#34;&gt;ãªãœç„¡é–¢ä¿‚ãªCDKã«å«Œæ°—ãŒã•ã—ãŸã®ã‹ï¼Ÿ&lt;/h2&gt;&#xA;&lt;p&gt;ç§ã¯æœ€è¿‘Goè¨€èªã§CLIã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œã£ã¦ã„ã‚‹ã€‚&#xA;æœ€åˆã¯è»½ã„æ°—æŒã¡ã§ã€&lt;strong&gt;No Server &amp;amp; No DB&lt;/strong&gt;ç’°å¢ƒã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œã‚ã†ã¨ã—ãŸã€‚&#xA;ã—ã‹ã—chromedriverã‚’ç§ã®CLIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã§å‹•ä½œã•ã›ã‚‹ã«ã¯ã„ãã¤ã‹ã®é›£ç‚¹ãŒã‚ã£ãŸã€‚&#xA;ï¼ˆ&lt;a href=&#34;https://loko1124.tistory.com/193#%ED%25--%AC%EB%25A-%25A-%EB%25-F%AC%25--%EA%25B-%AC%ED%25--%25--%EC%25-D%25B-%EB%25-D%BC%EB%25-A%25--%25--%EA%25B-%25--%EC%25-D%25--%25--%EC%25--%25-D%EA%25B-%25--%EB%25B-%25B-%EB%25-B%25A-%25--%EC%25--%25B-%EB%25A-%25A-%EC%25-B%25-C%EC%25--%25-C:~:text=%EC%9E%91%EB%8F%99%ED%95%B4%EC%A3%BC%EA%B8%B0%EB%A5%BC%20%EB%B0%94%EB%9D%BC%EB%8A%94%20%EB%B0%94%EC%9D%B4%EB%8B%A4.-,%ED%81%AC%EB%A1%A4%EB%9F%AC%20%EA%B5%AC%ED%98%84%EC%9D%B4%EB%9D%BC%EB%8A%94%20%EA%B2%83%EC%9D%80%20%EC%83%9D%EA%B0%81%EB%B3%B4%EB%8B%A4%20%EC%96%B4%EB%A0%A4%EC%9B%8C%EC%84%9C,-%EC%9A%94%EC%A6%98%20%ED%95%84%EC%9E%90%EB%8A%94%20%EC%82%AC%EC%9D%B4%EB%93%9C%EB%A1%9C&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ã“ã“&lt;/a&gt;&#xA;ã«å°‘ã—æ•´ç†ã—ã¦ãŠã„ãŸãŒã€CLIãŒå®Œæˆã—ãŸã‚‰ãã®æ™‚ã¾ãŸè©³ã—ãæŠ•ç¨¿ã™ã‚‹ã¤ã‚‚ã‚Šã ï¼‰&lt;/p&gt;&#xA;&lt;p&gt;ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ­ãƒ¼ã‚«ãƒ«PCã§chromedriverã‚’å®Ÿè¡Œã™ã‚‹ä»£ã‚ã‚Šã«ã€AWS Lambdaã§chromedriverã‚’å®Ÿè¡Œã™ã‚‹æ–¹æ³•ã‚’æ¢ã™ã“ã¨ã«ã—ãŸã€‚&#xA;ãã†ã—ã¦ã„ã‚‹ã†ã¡ã«&lt;a href=&#34;https://github.com/umihico/docker-selenium-lambda&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;docker-selenium-lambda&lt;/a&gt;&#xA;ã§ç§ãŒæœ›ã‚€ã‚ˆã†ã«Lambdaã§chromedriverã‚’å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’çŸ¥ã£ãŸã€‚&#xA;ã—ã‹ã—ç§ã¯æœ¬å½“ã«ãªãœã‹ã€Serverlessãƒ™ãƒ¼ã‚¹ã®ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’å‚ç…§ã—ã¦CDKãƒ™ãƒ¼ã‚¹ã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã“ã†ã¨ã—ãŸã€‚&#xA;å„ãƒ„ãƒ¼ãƒ«ã®é•·æ‰€ã¨çŸ­æ‰€ã¯è€ƒæ…®ã‚‚ã—ãªã‹ã£ãŸã€‚&#xA;ãŸã ç§ãŒå®Ÿéš›ã«ä¼šç¤¾ã§CDKã‚’å¤šãä½¿ã£ã¦ãŠã‚Šã€IaCã‚’æ›¸ããªã‚‰CDKãŒå¸¸ã«æ­£è§£ã ã¨ã„ã†ã‚ã‚Šãˆãªã„è€ƒãˆãŒæ ¹åº•ã«ã‚ã£ãŸã®ã ã€‚&lt;/p&gt;&#xA;&lt;p&gt;3æ—¥é–“ã€ç§ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«CDKã‚’é©ç”¨ã—ã‚ˆã†ã¨ã—ãŸæ™‚ã«ç›´é¢ã—ãŸæœ€å¤§ã®å•é¡Œã¯ECRã«é–¢é€£ã™ã‚‹ã‚‚ã®ã ã£ãŸã€‚&#xA;CDKã§ã¯ECRãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œæˆã§ããªã„ã€‚ - &lt;a href=&#34;https://stackoverflow.com/questions/67392204/aws-cdk-push-image-to-ecr&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;é–¢é€£ãƒªãƒ³ã‚¯&lt;/a&gt;&#xA;&#xA;ãã—ã¦æ€ã„ã‚‚ã‚ˆã‚‰ãªã‹ã£ãŸServerlessãŒã“ã®æ©Ÿèƒ½ã‚’ã†ã¾ãã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãŸã®ã ã€‚&#xA;ç§ã¯ã“ã“ã§CDKãŒã™ã¹ã¦ã‚’è§£æ±ºã—ã¦ãã‚Œã‚‹ä¸‡èƒ½ãƒ„ãƒ¼ãƒ«ã§ã¯ãªã„ã“ã¨ã«æ°—ã¥ã„ãŸã€‚&#xA;ãã—ã¦ç§ãŒã„ã‹ã«ç„¡æ€è€ƒã§é¦´æŸ“ã¿ã®ã‚ã‚‹ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ãŠã†ã¨ã—ã¦ã„ãŸã‹ã«æ°—ã¥ã„ãŸã€‚&lt;/p&gt;&#xA;&lt;h2 id=&#34;serverless-vs-sam-vs-cdk&#34;&gt;Serverless vs SAM vs CDK&lt;/h2&gt;&#xA;&lt;h3 id=&#34;serverless&#34;&gt;Serverless&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;é•·ã„é–“ä½¿ç”¨ã•ã‚Œã¦ããŸã®ã§ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãŒå¤§ãã„&lt;/li&gt;&#xA;&lt;li&gt;CloudFormationã®è¤‡é›‘ãªéƒ¨åˆ†ã‚’æŠ½è±¡åŒ–&lt;/li&gt;&#xA;&lt;li&gt;ç°¡å˜ã«ã‚¢ãƒ—ãƒªã‚’ãƒ†ã‚¹ãƒˆã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã‚‹ã‚·ãƒ³ãƒ—ãƒ«ã•&lt;/li&gt;&#xA;&lt;li&gt;æ§˜ã€…ãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³&lt;/li&gt;&#xA;&lt;li&gt;Serverlessè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¨CloudFormationè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®é•ã„ã‚’åŒºåˆ¥ã™ã‚‹ã®ãŒé›£ã—ã„å ´åˆãŒã‚ã‚‹&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;sam&#34;&gt;SAM&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Serverlessã¨åŒæ§˜ã«CloudFormationã®è¤‡é›‘ãªå±¤ã‚’ç°¡ç´ åŒ–&lt;/li&gt;&#xA;&lt;li&gt;ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆæ©Ÿèƒ½&lt;/li&gt;&#xA;&lt;li&gt;AWS build pipelineã¨ã®çµ±åˆ&lt;/li&gt;&#xA;&lt;li&gt;CDKã¨ã®çµ„ã¿åˆã‚ã›ãŒå¯èƒ½&lt;/li&gt;&#xA;&lt;li&gt;è¤‡é›‘ãªã‚¤ãƒ³ãƒ•ãƒ©æ§‹æˆã‚’ã™ã‚‹ã«ã¯é›£ã—ã„å ´åˆãŒã‚ã‚‹&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;cdk&#34;&gt;CDK&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ§‹æˆã—ã¦å†åˆ©ç”¨ã™ã‚‹ã®ã«å®¹æ˜“&lt;/li&gt;&#xA;&lt;li&gt;é¦´æŸ“ã¿ã®ã‚ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã§ã‚¤ãƒ³ãƒ•ãƒ©ã‚’å®šç¾©&lt;/li&gt;&#xA;&lt;li&gt;è¤‡é›‘ãªã‚¤ãƒ³ãƒ•ãƒ©æ§‹æˆã‚’ã™ã‚‹ã®ã«å®¹æ˜“&lt;/li&gt;&#xA;&lt;li&gt;ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã«é™ã‚‰ãšAWSã®ã™ã¹ã¦ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’ã‚µãƒãƒ¼ãƒˆ&lt;/li&gt;&#xA;&lt;li&gt;ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆãªã©ä¸€éƒ¨ã®è©³ç´°æ©Ÿèƒ½ã¯ä»–ã®ã‚µãƒ¼ãƒ“ã‚¹ã¨ã®çµ±åˆãŒå¿…è¦&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h3&gt;&#xA;&lt;p&gt;é‡è¦ãªé•ã„ã¨ã„ãˆã°ã€Serverlessã¨SAMã¯æ–‡å­—é€šã‚ŠServerlessã®ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚Šã€CDKã¯AWSã®ã™ã¹ã¦ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹IaCãƒ„ãƒ¼ãƒ«ã ã¨ã„ã†ç‚¹ã ã€‚&#xA;ã—ãŸãŒã£ã¦ç§ãŒä½œã‚ã†ã¨ã—ã¦ã„ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒè¤‡é›‘ã«ãªã‚Œã°ãªã‚‹ã»ã©ã€CDKã‚’ä½¿ã†æ–¹ãŒæœ‰åˆ©ã ã€‚&#xA;ä¸€æ–¹ã€ç§ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ§‹é€ ãŒè¤‡é›‘ã§ãªã„æ™‚ã¯Serverlessã¨SAMã®ã©ã¡ã‚‰ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã†ã‹æ‚©ã‚€ã“ã¨ã«ãªã‚‹ãŒã€å®Ÿéš›ç§ã¯ã“ã®ã‚ˆã†ãªé¸æŠã®åˆ†å²ã«ç«‹ãŸã•ã‚ŒãŸã‚‰Serverlesså´ã®è»½ãã¦ã‚·ãƒ³ãƒ—ãƒ«ãªæ§‹é€ ã‚’å¤šãä½¿ã†ã“ã¨ã«ãªã‚Šãã†ã ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ã¾ãŸã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ä¸­å¿ƒã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œã‚ã†ã¨ã™ã‚‹ãªã‚‰Amplifyã‚’å­¦ã‚“ã§ã¿ã‚‹ã®ã‚‚ã„ã„ã ã‚ã†ã€‚&lt;/p&gt;&#xA;&lt;h2 id=&#34;çµè«–&#34;&gt;çµè«–&lt;/h2&gt;&#xA;&lt;p&gt;ä»Šå›ã®æ©Ÿä¼šã«ç§ãŒã„ã‹ã«è€ƒãˆãªã—ã«é–‹ç™ºãƒ„ãƒ¼ãƒ«ã‚’é¸æŠã—ã¦ä½¿ã£ã¦ããŸã‹ã«æ°—ã¥ã„ãŸã€‚&#xA;ãŸã ç§ãŒå¤šãä½¿ã£ã¦ãã¦é¦´æŸ“ã¿ã®ã‚ã‚‹ã‚‚ã®ã€ãã—ã¦ã»ã¼æ­£è§£ã¨è¦‹ãªã•ã‚Œã‚‹ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ¡ç”¨ã—ã¦ã„ãŸã®ã ã€‚&#xA;ã‚ˆã‚Šè‰¯ã„é–‹ç™ºè€…ã«ãªã‚‹ãŸã‚ã«ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã©ã®ãƒ„ãƒ¼ãƒ«ãŒé©ã—ã¦ãŠã‚Šã€ã“ã‚Œã‚‰ã‚’ã©ã†çµ„ã¿åˆã‚ã›ãŸã‚‰è‰¯ã„ã‚·ãƒŠã‚¸ãƒ¼ã‚’å‡ºã›ã‚‹ã‹è€ƒãˆã¦ã¿ã‚‹ã¹ãã ã€‚&#xA;ä»Šå¾Œã¯ã‚µã‚¤ãƒ‰ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚‹æ™‚ã«ã‚‚ã€ç§ãŒå®Ÿè£…ã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã«ã‚ˆã‚Šé©ã—ãŸæ–¹æ³•ã‚’æ¢ã—ã¦æ´»ç”¨ã™ã‚‹ç¿’æ…£ã‚’ã¤ã‘ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>è¬ã®S3 Access Deniedã‚¨ãƒ©ãƒ¼</title>
      <link>https://nmin11.github.io/jp/blog/2-s3-access-denied-error/</link>
      <pubDate>Sat, 01 Jul 2023 00:00:00 +0000</pubDate>
      <guid>https://nmin11.github.io/jp/blog/2-s3-access-denied-error/</guid>
      <description>&lt;h2 id=&#34;ã‚¨ãƒ©ãƒ¼ã‚’ç™ºè¦‹ã—ãŸãã£ã‹ã‘&#34;&gt;ã‚¨ãƒ©ãƒ¼ã‚’ç™ºè¦‹ã—ãŸãã£ã‹ã‘&lt;/h2&gt;&#xA;&lt;p&gt;å®Ÿã¯åŒã˜ã‚¨ãƒ©ãƒ¼ã‚’äºŒåº¦ã‚‚çµŒé¨“ã—ãŸã€‚&#xA;äºŒåº¦ã¨ã‚‚ä¼šç¤¾ã®æ¥­å‹™ä¸­ã«ç™ºç”Ÿã—ãŸã‚¨ãƒ©ãƒ¼ã§ã¯ãªã‹ã£ãŸãŒã€ã©ã¡ã‚‰ã‚‚ä¼šç¤¾ã®æ¥­å‹™ã«é–¢é€£ã™ã‚‹æ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã«å®Ÿè£…ã—ãŸã‚µã‚¤ãƒ‰ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ç™ºç”Ÿã—ãŸã€‚&#xA;å®Ÿè£…ã—ãŸã®ã¯S3ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒä½œæˆã•ã‚ŒãŸæ™‚ã€&lt;strong&gt;ãã®eventã§ãƒˆãƒªã‚¬ãƒ¼ã•ã‚Œã‚‹Lambdaé–¢æ•°&lt;/strong&gt;ã ã£ãŸã€‚&#xA;è©²å½“ã®Lambdaé–¢æ•°ã¯å…±é€šã—ã¦å—ã‘å–ã£ãŸ&lt;strong&gt;eventã‹ã‚‰ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®key nameã‚’å–å¾—ã—ã€ãã®key nameã§ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±ã‚’å†åº¦ç…§ä¼šã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯&lt;/strong&gt;ã ã£ãŸã€‚&#xA;ã—ã‹ã—ç§ã®Lambdaé–¢æ•°ã¯åŸå› ä¸æ˜ã®Access Deniedã‚¨ãƒ©ãƒ¼ã‚’è¿”ã—ãŸã€‚&#xA;Lambdaé–¢æ•°ã¯è©²å½“ã™ã‚‹S3 Bucketã‹ã‚‰&lt;code&gt;GetObject&lt;/code&gt;ã‚’å®Ÿè¡Œã§ãã‚‹ååˆ†ãªæ¨©é™ã‚’æŒã£ã¦ã„ãŸã«ã‚‚ã‹ã‹ã‚ã‚‰ãšã ï¼&lt;/p&gt;&#xA;&lt;img width=&#34;669&#34; alt=&#34;aws s3 access denied&#34; src=&#34;https://github.com/nmin11/blog/assets/75058239/2ebb354e-dab6-4e92-b4da-916d729dbef6&#34;&gt;&#xA;&lt;h2 id=&#34;ä½•ãŒå•é¡Œã ã£ãŸã®ã‹&#34;&gt;ä½•ãŒå•é¡Œã ã£ãŸã®ã‹&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;key nameã«éŸ“å›½èªã‚„ç‰¹æ®Šæ–‡å­—ã€ã‚¹ãƒšãƒ¼ã‚¹ãªã©ã®å€¤ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã¨&lt;/strong&gt;ã€eventã‚’é€šã˜ã¦å—ã‘å–ã£ãŸ&lt;code&gt;Record.S3.Object.Key&lt;/code&gt;ã®å€¤ãŒURLã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦å‡ºåŠ›ã•ã‚ŒãŸã€‚&#xA;å…ˆã»ã©åŒã˜å•é¡Œã‚’2å›çµŒé¨“ã—ãŸã¨è¿°ã¹ãŸãŒã€ä¸€åº¦ã¯éŸ“å›½èªã®åå‰ã ã£ãŸãŸã‚ç™ºç”Ÿã—ã€ä¸€åº¦ã¯ç‰¹æ®Šæ–‡å­—ãŒå«ã¾ã‚Œã¦ã„ãŸãŸã‚ç™ºç”Ÿã—ãŸğŸ˜“&lt;/p&gt;&#xA;&lt;img width=&#34;853&#34; alt=&#34;url encoded key name&#34; src=&#34;https://github.com/nmin11/blog/assets/75058239/e76bcbaf-7e9e-48fe-8ae2-1db58bf9a20c&#34;&gt;&#xA;&lt;p&gt;ã‚„ã¯ã‚ŠS3ã®Objectè‡ªä½“ãŒURLå½¢å¼ã«ãªã£ã¦ã„ã‚‹ã®ã§ã“ã®ã‚ˆã†ã«è¿”ã•ã‚ŒãŸã®ã ã¨æ€ã†ã€‚&lt;/p&gt;&#xA;&lt;img width=&#34;618&#34; alt=&#34;object url&#34; src=&#34;https://github.com/nmin11/blog/assets/75058239/a26d5a94-4b88-4173-8566-9d49ec97378b&#34;&gt;&#xA;&lt;p&gt;ä¸Šè¨˜ã®Object URLã‚’ä½¿ã£ã¦ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§AWS SDKã‚’é€šã˜ã¦ç›´æ¥ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±ã‚’å–å¾—ã—ã¦ã¿ãŸã€‚&lt;/p&gt;&#xA;&lt;script src=&#34;https://gist.github.com/nmin11/95c04703578e7099ec91091aac088b12.js&#34;&gt;&lt;/script&gt;&#xA;&lt;p&gt;ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒå‡ºåŠ›ã•ã‚ŒãŸã€‚&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Failed to retrieve object: NoSuchKey: The specified key does not exist.&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å½“ç„¶ã®çµæœã ãŒã€ä¸€ã¤é•ã†ç‚¹ãŒã‚ã£ãŸã€‚&#xA;ç§ã®ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§ã¯è©²å½“ã™ã‚‹ã‚­ãƒ¼ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒå­˜åœ¨ã—ãªã„ã¨ã„ã†æ­£ã—ã„ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã—ãŸãŒã€&#xA;ç§ã®Lambdaé–¢æ•°ã¯Access Deniedã‚’è¿”ã—ãŸã¨ã„ã†ç‚¹ã ã€‚&#xA;ç¹°ã‚Šè¿”ã—è¨€ã†ãŒã€ãŸã¨ãˆå­˜åœ¨ã—ãªã„ã‚­ãƒ¼å€¤ã§ã‚ã£ã¦ã‚‚ã€ç§ã®Lambdaã¯è©²å½“Bucketã«å¯¾ã—ã¦&lt;code&gt;GetObject&lt;/code&gt;ã‚’å®Ÿè¡Œã™ã‚‹æ¨©é™ãŒã‚ã‚‹ã€‚&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;#34;Version&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;2012-10-17&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;#34;Statement&amp;#34;&lt;/span&gt;: [&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;#34;Sid&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;VisualEditor0&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;#34;Effect&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;Allow&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;#34;Action&amp;#34;&lt;/span&gt;: [&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;s3:GetObject&amp;#34;&lt;/span&gt;],&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;#34;Resource&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;arn:aws:s3:::nmin-access-test/*&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  ]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã“ã®å•é¡Œã¯AWSã§LambdaãŒS3ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹éš›ã«ç™ºç”Ÿã—ã†ã‚‹ã‚¨ãƒ©ãƒ¼ã«å¯¾ã™ã‚‹åˆ†å²å‡¦ç†ãŒé©åˆ‡ã«è¡Œã‚ã‚Œã¦ã„ãªã„ãŸã‚ã«ç™ºç”Ÿã—ãŸã¨æ¨å®šã•ã‚Œã‚‹ã€‚&#xA;ã“ã®èª¤ã£ãŸã‚¨ãƒ©ãƒ¼è¡¨è¨˜æ–¹å¼ã®ã›ã„ã§ã€ç§ã¯å®Ÿéš›&amp;rsquo;S3 Access Denied&amp;rsquo;é–¢é€£ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§ã®ã¿æ¤œç´¢ã—ãªãŒã‚‰å•é¡Œã‚’è§£æ±ºã—ã‚ˆã†ã¨ã—ã¦ç´„1é€±é–“ã®æ™‚é–“ã‚’ç„¡é§„ã«ã—ãŸã€‚&#xA;&lt;em&gt;ã ã‹ã‚‰å®Ÿã¯å˜ç´”ãªå•é¡Œã«ã‚‚ã‹ã‹ã‚ã‚‰ãšã€ä¸€åº¦è¨˜éŒ²ã—ã¦ãŠã“ã†ã¨æ€ã£ãŸã€‚&lt;/em&gt;&lt;/p&gt;&#xA;&lt;h2 id=&#34;ã©ã†ã™ã‚Œã°è§£æ±ºã§ãã‚‹ã‹&#34;&gt;ã©ã†ã™ã‚Œã°è§£æ±ºã§ãã‚‹ã‹&lt;/h2&gt;&#xA;&lt;p&gt;Lambdaé–¢æ•°ã§eventã‚’é€šã˜ã¦å—ã‘å–ã£ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æƒ…å ±ã‚’å†åº¦ç…§ä¼šã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã€eventã§ã¯URLå½¢å¼ã®æ–‡å­—åˆ—ã§å…¥ã£ã¦ããŸkey nameã‚’å†ã³å…ƒã®æ–‡å­—åˆ—ã«ãƒ‘ãƒ¼ã‚¹ã™ã‚‹éç¨‹ãŒå¿…è¦ã ã€‚&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;decodedObject, err &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; url.&lt;span style=&#34;color:#50fa7b&#34;&gt;PathUnescape&lt;/span&gt;(object)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;if&lt;/span&gt; err &lt;span style=&#34;color:#ff79c6&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;nil&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  fmt.&lt;span style=&#34;color:#50fa7b&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;Error occurred while decoding URL: &amp;#34;&lt;/span&gt;, err)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;decodedObject = strings.&lt;span style=&#34;color:#50fa7b&#34;&gt;Replace&lt;/span&gt;(decodedObject, &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;+&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34; &amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#ff79c6&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#bd93f9&#34;&gt;1&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Goè¨€èªã§ã¯çµ„ã¿è¾¼ã¿ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§æä¾›ã•ã‚Œã‚‹&lt;code&gt;url.PathUnescape&lt;/code&gt;é–¢æ•°ãŒã‚ã£ãŸã®ã§ä½¿ã£ã¦ã¿ãŸã€‚&#xA;ã—ã‹ã—ã“ã®é–¢æ•°ã¯ç©ºç™½å€¤(&lt;code&gt; &lt;/code&gt;)ãŒç‰¹æ®Šè¨˜å·(&lt;code&gt;+&lt;/code&gt;)ã«URLã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚Œã‚‹éƒ¨åˆ†ã‚’å‡¦ç†ã—ã¦ãã‚Œãªã‹ã£ãŸã®ã§ã€&lt;code&gt;strings.Replace&lt;/code&gt;é–¢æ•°ã¾ã§è¿½åŠ ã§ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã£ãŸã€‚&#xA;ã“ã“ã¾ã§å‡¦ç†ã—ãŸã‚‰eventã‹ã‚‰éŸ“å›½èªã‚„ç‰¹æ®Šæ–‡å­—ã€ã‚¹ãƒšãƒ¼ã‚¹ãŒå«ã¾ã‚ŒãŸkey nameã‚’å—ã‘å–ã£ã¦ã‚‚æ­£å¸¸ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç…§ä¼šã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
