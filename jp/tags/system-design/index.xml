<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>System-Design on ロコ</title>
    <link>https://nmin11.github.io/jp/tags/system-design/</link>
    <description>Recent content in System-Design on ロコ</description>
    <generator>Hugo</generator>
    <language>jp</language>
    <lastBuildDate>Sat, 07 Feb 2026 00:00:00 +0000</lastBuildDate>
    <atom:link href="https://nmin11.github.io/jp/tags/system-design/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>時系列DBについて学ぼう</title>
      <link>https://nmin11.github.io/jp/blog/8-lets-learn-time-series-database/</link>
      <pubDate>Sat, 07 Feb 2026 00:00:00 +0000</pubDate>
      <guid>https://nmin11.github.io/jp/blog/8-lets-learn-time-series-database/</guid>
      <description>&lt;p&gt;大規模アーキテクチャを設計したり、分散システムを構築しようとする際に&lt;strong&gt;Time Series Database(TSDB)&lt;/strong&gt; の導入を検討することができる。今日はTSDBがどのようなツールであるか、どのような特徴を持っているか、そしてどのような問題を解決するのに役立つかを見ていこう。&lt;/p&gt;&#xA;&lt;h2 id=&#34;1-時系列データとは&#34;&gt;1. 時系列データとは？&lt;/h2&gt;&#xA;&lt;p&gt;TSDBは時系列データを保存し処理するデータベースである。では、時系列データとは何か？時系列データは単にタイムスタンプが付いているデータではない。より正確には_「時間に沿って追跡、モニタリング、ダウンサンプリング、集計される測定値またはイベント」_と定義でき、ここでいう&lt;strong&gt;測定値&lt;/strong&gt;または&lt;strong&gt;イベント&lt;/strong&gt;には以下のようなものが含まれる。&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;サーバーメトリクス&lt;/li&gt;&#xA;&lt;li&gt;アプリケーションパフォーマンスモニタリング&lt;/li&gt;&#xA;&lt;li&gt;ネットワークデータ&lt;/li&gt;&#xA;&lt;li&gt;IoTセンサーデータ&lt;/li&gt;&#xA;&lt;li&gt;クリックイベント&lt;/li&gt;&#xA;&lt;li&gt;マーケット取引データ&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;このようなデータを扱う時系列データは、一般的なDBとは異なり、以下のような差別化ポイントを持つ。&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;Write heavy&lt;/strong&gt;: 書き込み95%、読み取り5%&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Immutable&lt;/strong&gt;: 一度記録されると変更されることがほとんどないため、append-only方式でデータを追加&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Ordered by time&lt;/strong&gt;: 時間順に並べられており、時間によってインデックス化されていると見なすことができる&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;High cardinality&lt;/strong&gt;: 一般的にカーディナリティが高い&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Time-based range queries&lt;/strong&gt;: 時間範囲で大量のレコードを照会&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Continuous data stream&lt;/strong&gt;: 継続的にデータポイントを収集する形態&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;これらの特性に対応するためにTSDBがどのような戦略を取るかを見ていこう。&lt;/p&gt;&#xA;&lt;h2 id=&#34;2-書き込み最適化&#34;&gt;2. 書き込み最適化&lt;/h2&gt;&#xA;&lt;p&gt;一般的なDBの場合、データを書き込むには書き込む位置を見つけて修正または挿入する作業を行う必要がある。以下のような形で作業が進行するだろう。&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;[&lt;/span&gt;Seek to block 4752&lt;span style=&#34;color:#ff79c6&#34;&gt;]&lt;/span&gt; → &lt;span style=&#34;color:#ff79c6&#34;&gt;[&lt;/span&gt;Read&lt;span style=&#34;color:#ff79c6&#34;&gt;]&lt;/span&gt; → &lt;span style=&#34;color:#ff79c6&#34;&gt;[&lt;/span&gt;Modify&lt;span style=&#34;color:#ff79c6&#34;&gt;]&lt;/span&gt; → &lt;span style=&#34;color:#ff79c6&#34;&gt;[&lt;/span&gt;Write&lt;span style=&#34;color:#ff79c6&#34;&gt;]&lt;/span&gt; → &lt;span style=&#34;color:#ff79c6&#34;&gt;[&lt;/span&gt;Seek to block 9201&lt;span style=&#34;color:#ff79c6&#34;&gt;]&lt;/span&gt; → ...&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;一方、TSDBは既存のデータを修正する必要がなく、時間順にデータを積載すればよいので、&lt;strong&gt;Append-only&lt;/strong&gt;方式でデータを追加するだけでよい。以下のように作業がはるかに単純化される。&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;[&lt;/span&gt;Write to end&lt;span style=&#34;color:#ff79c6&#34;&gt;]&lt;/span&gt; → &lt;span style=&#34;color:#ff79c6&#34;&gt;[&lt;/span&gt;Write to end&lt;span style=&#34;color:#ff79c6&#34;&gt;]&lt;/span&gt; → &lt;span style=&#34;color:#ff79c6&#34;&gt;[&lt;/span&gt;Write to end&lt;span style=&#34;color:#ff79c6&#34;&gt;]&lt;/span&gt; → ...&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;lsmlog-structured-mergeツリー&#34;&gt;LSM(Log-Structured Merge)ツリー&lt;/h3&gt;&#xA;&lt;p&gt;LSMツリーはInfluxDB、Cassandra、LevelDBなど高性能の書き込みスループットを誇るデータベースシステムの秘伝のソースだ。LSMツリーの核心アイデアは次の通りである。&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;コストがかかるランダム書き込み → コストが低い順次書き込み&lt;/strong&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;バックグラウンドで定期的にデータを再構成することで読み取り効率を向上&lt;/strong&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;そしてLSMツリーの動作方式は以下の通りである。&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
